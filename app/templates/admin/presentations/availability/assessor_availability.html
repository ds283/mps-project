{% extends "base_app.html" %}
{% import "bootstrap/wtf.html" as wtf %}

{% block title %}
    Set availability for {{ assessment.name }}
{% endblock %}

{% block bodyblock %}
    <div class="row">
        <div class="col-xs-1"></div>
        <div class="col-xs-10">
            {% if url and text %}
                <div class="top-return-link">
                    <a href="{{ url }}">
                        <i class="fa fa-backward"></i> Return to {{ text }}
                    </a>
                </div>
            {% endif %}

            <div class="panel panel-primary">
                <div class="panel-heading">
                    Set <i class="fa fa-user"></i> <strong>{{ assessor.user.name }}</strong> availability for assessment event <strong>{{ assessment.name }}</strong>
                </div>
                <div class="panel-body">
                    <div class="row">
                        <div class="col-xs-12">
                            <div class="pull-right">
                                <a class="btn btn-default" href="{{ url_for('admin.session_all_available', f_id=assessor.id, a_id=assessment.id) }}"><i class="fa fa-check"></i> Available for all</a>
                                <a class="btn btn-default" href="{{ url_for('admin.session_all_unavailable', f_id=assessor.id, a_id=assessment.id) }}"><i class="fa fa-times"></i> Not available for all</a>
                            </div>
                        </div>
                    </div>
                    <hr class="intro-divider">
                    <div class="row vertical-top event-table">
                        <div class="col-xs-4"><strong>Date</strong></div>
                        <div class="col-xs-1"><strong>Session</strong></div>
                        <div class="col-xs-7"></div>
                    </div>

                    {% for session in assessment.ordered_sessions %}
                        <div class="row vertical-align event-table">
                            <div class="col-xs-4">{{ session.date.strftime("%a %d %b %Y") }}</div>
                            <div class="col-xs-1">{{ session.session_type_label|safe }}</div>
                            <div class="col-xs-7">
                                <div class="pull-right">
                                {% if session.faculty_available(assessor.id) %}
                                    <a class="btn btn-success btn-sm"><i class="fa fa-check"></i> Available</a>
                                    <a href="{{ url_for('admin.session_ifneeded', f_id=assessor.id, s_id=session.id) }}" class="btn btn-default btn-sm">If needed</a>
                                    <a href="{{ url_for('admin.session_unavailable', f_id=assessor.id, s_id=session.id) }}" class="btn btn-default btn-sm"><i class="fa fa-times"></i> Not available</a>
                                {% elif session.faculty_ifneeded(assessor.id) %}
                                    <a href="{{ url_for('admin.session_available', f_id=assessor.id, s_id=session.id) }}" class="btn btn-default btn-sm"><i class="fa fa-check"></i> Available</a>
                                    <a class="btn btn-warning btn-sm">If needed</a>
                                    <a href="{{ url_for('admin.session_unavailable', f_id=assessor.id, s_id=session.id) }}" class="btn btn-default btn-sm"><i class="fa fa-times"></i> Not available</a>
                                {% else %}
                                    <a href="{{ url_for('admin.session_available', f_id=assessor.id, s_id=session.id) }}" class="btn btn-default btn-sm"><i class="fa fa-check"></i> Available</a>
                                    <a href="{{ url_for('admin.session_ifneeded', f_id=assessor.id, s_id=session.id) }}" class="btn btn-default btn-sm">If needed</a>
                                    <a class="btn btn-danger btn-sm"><i class="fa fa-times"></i> Not available</a>
                                {% endif %}
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            </div>

            {% if url and text %}
                <div>
                    <a href="{{ url }}">
                        <i class="fa fa-backward"></i> Return to {{ text }}
                    </a>
                </div>
            {% endif %}
        </div>
        <div class="col-xs-1"></div>
    </div>
{% endblock %}
