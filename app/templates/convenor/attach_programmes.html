{% import "bootstrap/wtf.html" as wtf %}

{% extends "security/index.html" %}

{% block title %}
    {{ title }}
{% endblock %}

{% block formtitle %}
    Edit preferred degree programmes for project <strong>{{ data.name }}</strong>
{% endblock %}

{% block form_content %}
    <div class="panel panel-default">
        <div class="panel-body">
            {% if data and data.programmes and programmes %}
                <h4>
                {% for programme in programmes %}
                    {% if programme in data.programmes %}
                        <a class="btn btn-success selection-label" href="{{ url_for('faculty.remove_programme', projectid=data.id, progid=programme.id) }}"><i class="fa fa-times"></i> {{ programme.full_name }}</a>
                    {% endif %}
                {% endfor %}
                </h4>
            {% else %}
                <p>No current programmes</p>
            {% endif %}
        </div>
        <div class="panel-footer">
            {% if data and programmes %}
                {% for proj_class in data.project_classes %}
                    {% set ns = namespace(output = false) %}
                    <p><strong>{{ proj_class.name }}</strong></p>
                    <h4>
                    {% for programme in programmes %}
                        {% if (programme in proj_class.programmes) and (programme not in data.programmes) %}
                            <a class="btn btn-default selection-label" href="{{ url_for('faculty.add_programme', projectid=data.id, progid=programme.id) }}"><i class="fa fa-plus"></i> {{ programme.full_name }}</a>
                            {% set ns.output = true %}
                        {% endif %}
                    {% endfor %}
                    </h4>
                    {% if not ns.output %}
                        <p>No available programmes</p>
                    {% endif %}
                {% endfor %}
            {% else %}
                <p>No available programmes</p>
            {% endif %}
        </div>
    </div>

    <a href="{{ url_for('convenor.attached', id=pclass_id) }}">
        <i class="fa fa-backward"></i> Return to convenor dashboard
    </a>
{% endblock %}
