{% import "bootstrap/wtf.html" as wtf %}

{% extends "security/index.html" %}

{% block title %}
    {{ title }}
{% endblock %}

{% block formtitle %}
    {% if user %}
        Edit user account data for <i class="fa fa-user"></i> {{ user.first_name }} {{ user.last_name }} ({{ user.username }})
    {% else %}
        {{ title }}
    {% endif %}
{% endblock %}

{% block form_content %}
    {% if user %}
        <form action="{{ url_for('admin.edit_user', id=user.id) }}" method="POST" name="user_form">
    {% else %}
        {% if role == 'faculty' or role == 'office' %}
            <form action="{{ url_for('admin.create_simple', role=role) }}" method="POST" name="user_form">
        {% else %} {# current role == 'student' is only choice #}
            <form action="{{ url_for('admin.create_student', role=role) }}" method="POST" name="user_form">
        {% endif %}
    {% endif %}
        {{ user_form.hidden_tag() }}

{#        {{ wtf.form_errors(user_form) }}#}

        {{ wtf.form_field(user_form.email) }}
        {{ wtf.form_field(user_form.username) }}

        {% if user_form.password %}
            {{ wtf.form_field(user_form.password) }}
        {% endif %}
        {% if user_form.password_confirm %}
            {{ wtf.form_field(user_form.password_confirm) }}
        {% endif %}

        {{ wtf.form_field(user_form.first_name) }}
        {{ wtf.form_field(user_form.last_name) }}

        {% if user_form.exam_number %}
            {{ wtf.form_field(user_form.exam_number) }}
        {% endif %}
        {% if user_form.cohort %}
            {{ wtf.form_field(user_form.cohort) }}
        {% endif %}
        {% if user_form.programme %}
            {{ wtf.form_field(user_form.programme) }}
        {% endif %}

        {{ wtf.form_field(user_form.submit) }}

    </form>
{% endblock %}
